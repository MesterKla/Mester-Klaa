<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸</title>
  <style>
    body {
      margin: 0;
      padding: 0 0 50px 0; /* Ù…Ø³Ø§ÙØ© Ø³ÙÙ„ÙŠØ© Ù„Ù„Ù…Ù„Ø§Ø­Ø¸Ø© */
      font-family: 'Cairo', sans-serif;
      text-align: center;
      color: #333; /* Ù„ÙˆÙ† Ù†Øµ Ø£Ø³Ø§Ø³ÙŠ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ© */

      /* ğŸ’¡ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ù‡Ù†Ø§) */
      background: linear-gradient(135deg, #e0f2f7 0%, #c1e4f2 100%); 
      background-attachment: fixed;
    }

    /* ğŸ’¡ Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø§Ø³Ù… "Mester Kla" Ø§Ù„Ù…ØªÙƒØ±Ø± ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
    .background-text-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* Ù„Ø¥Ø®ÙØ§Ø¡ Ø£ÙŠ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ù†Øµ ÙŠØ®Ø±Ø¬ Ø¹Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯ */
      z-index: -2; /* Ø§Ù„Ø£Ø¨Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
      pointer-events: none; /* Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù†Øµ */
      user-select: none; /* Ù„Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ */
      opacity: 0.7; /* Ø´ÙØ§ÙÙŠØ© Ø¹Ø§Ù…Ø© Ù„Ù„Ø·Ø¨Ù‚Ø© */
    }

    .background-text-overlay span {
      position: absolute;
      font-weight: bold;
      white-space: nowrap; /* Ù„Ù…Ù†Ø¹ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙƒÙ„Ù…Ø© Mester Kla */
      transform-origin: center center; /* Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
      text-shadow: 1px 1px 2px rgba(0,0,0,0.03); /* Ø¸Ù„ Ø®ÙÙŠÙ */
    }

    /* Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ø¹Ø¯Ø© Ù†Ø³Ø® Ù…Ù† Ø§Ø³Ù…Ùƒ Mester Kla */
    .background-text-overlay span:nth-child(1) {
      top: 10%; left: 5%;
      font-size: 8vw; color: rgba(0, 120, 255, 0.04);
      transform: rotate(-10deg);
    }
    .background-text-overlay span:nth-child(2) {
      top: 30%; right: 10%;
      font-size: 10vw; color: rgba(255, 165, 0, 0.03);
      transform: rotate(15deg);
    }
    .background-text-overlay span:nth-child(3) {
      bottom: 20%; left: 15%;
      font-size: 9vw; color: rgba(76, 175, 80, 0.04);
      transform: rotate(5deg);
    }
    .background-text-overlay span:nth-child(4) {
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) rotate(-25deg);
      font-size: 12vw; color: rgba(0, 0, 0, 0.03);
    }
    .background-text-overlay span:nth-child(5) {
      top: 80%; right: 20%;
      font-size: 7vw; color: rgba(0, 120, 255, 0.03);
      transform: rotate(20deg);
    }
     .background-text-overlay span:nth-child(6) {
      top: 60%; left: 25%;
      font-size: 9vw; color: rgba(255, 165, 0, 0.02);
      transform: rotate(-10deg);
    }
    .background-text-overlay span:nth-child(7) {
      bottom: 5%; left: 40%;
      font-size: 6vw; color: rgba(76, 175, 80, 0.03);
      transform: rotate(8deg);
    }
    .background-text-overlay span:nth-child(8) {
      top: 20%; left: 70%;
      font-size: 11vw; color: rgba(0, 0, 0, 0.02);
      transform: rotate(-5deg);
    }
    .background-text-overlay span:nth-child(9) {
      bottom: 15%; right: 50%;
      transform: translate(50%, -50%) rotate(22deg);
      font-size: 10vw; color: rgba(0, 120, 255, 0.02);
    }
    .background-text-overlay span:nth-child(10) {
      top: 40%; right: 30%;
      font-size: 7vw; color: rgba(255, 165, 0, 0.02);
      transform: rotate(-18deg);
    }


    h1 {
      color: #0078ff;
      font-size: 24px;
      margin-top: 20px;
      line-height: 1.6;
    }
    .day {
      display: block;
      margin: 5px 0;
      font-weight: bold;
    }
    .day1 { color: #ff3b3b; }
    .day2 { color: #ff9f00; }
    .day3 { color: #4caf50; }

    .wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
      margin: 40px auto;
      background-color: rgba(255, 255, 255, 0.9); /* Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ Ø´ÙØ§ÙØ© Ù„Ù„Ø¹Ø¬Ù„Ø© */
      border-radius: 50%;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2); /* Ø¸Ù„ Ù„Ù„Ø¹Ø¬Ù„Ø© */
    }
    canvas {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }

    /* Ø§Ù„Ù…Ø«Ù„Ø« Ø§Ù„ØµØºÙŠØ± Ø§Ù„ØµØ­ÙŠØ­ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ */
    .pointer {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-top: 25px solid red; 
      z-index: 10;
    }

    /* Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø¹Ø¬Ù„Ø© */
    .center-dot {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30px;
      height: 30px;
      background: radial-gradient(circle, gold 0%, goldenrod 90%);
      border-radius: 50%;
      z-index: 11;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }

    input {
      margin-top: 30px;
      padding: 12px;
      font-size: 16px;
      width: 220px;
      border-radius: 10px;
      border: 1px solid #ccc;
      text-align: center;
      background-color: rgba(255, 255, 255, 0.9); /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ù„Ù„Ø­Ù‚Ù„ */
    }
    button {
      margin-top: 15px;
      padding: 12px 24px;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      background-color: #0078ff;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #005fcc;
    }

    /* ØªØ¹Ø¯ÙŠÙ„ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© */
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      z-index: 100;
      width: 280px;
    }

    /* Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„ØªØµØ­ÙŠØ­ Ù…ÙƒØ§Ù† Ø§Ù„Ù€ Ã— - Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ */
    .popup button.close {
      position: absolute;
      top: 5px; 
      right: 10px;
      background: none;
      border: none;
      font-size: 28px; 
      cursor: pointer;
      color: #555;
      padding: 0; 
      line-height: 1; 
    }

    .loading {
      display: none;
      margin-top: 20px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #0078ff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin-left: auto;
      margin-right: auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù„ØªØµÙ‚Ø© Ø¨Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© */
    .note {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      background-color: #f8f8f8;
      padding: 5px 0;
      color: #777;
      font-size: 14px;
      z-index: 99;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="background-text-overlay">
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    <span>Mester Kla</span>
    </div>

  <h1>
    <span class="day day1">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„: Ù†Ø³Ø¨Ø© Ø§Ù„ÙÙˆØ² 30%</span>
    <span class="day day2">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ: Ù†Ø³Ø¨Ø© Ø§Ù„ÙÙˆØ² 60%</span>
    <span class="day day3">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø«Ø§Ù„Ø«: Ù†Ø³Ø¨Ø© Ø§Ù„ÙÙˆØ² 100%</span>
  </h1>

  <div class="wheel-container">
    <div class="pointer"></div>
    <canvas id="wheelCanvas" width="300" height="300"></canvas>
    <div class="center-dot"></div>
  </div>

  <input type="number" id="playerId" placeholder="" />
  <br>
  <button id="spinBtn">Ø§Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø­Ø³Ø§Ø¨Ùƒ</button>
  <div class="loading" id="loading"></div>

  <div id="popup" class="popup">
    <button class="close" onclick="closePopup()">Ã—</button>
    <p id="popupText">Ù„Ù„Ø£Ø³Ù! Ù„ÙƒÙ† Ù„Ø§ ØªÙ‚Ù„Ù‚ Ø¹Ø¯ ØºØ¯Ø§Ù‹ Ø¨Ù†Ø³Ø¨Ø© ÙÙˆØ² Ø£Ø¹Ù„Ù‰ğŸ</p>
  </div>

  <p class="note"><small>Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù„Ù Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©.</small></p>

  <script>
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    const sections = ["â˜¹ï¸", "100ğŸ’", "â˜¹ï¸", "100ğŸ’", "â˜¹ï¸", "100ğŸ’"];
    const colors = ["#FFEB3B", "#4CAF50", "#F44336", "#03A9F4", "#9C27B0", "#FF9800"];
    let spinning = false;

    function drawWheel() {
      const arc = Math.PI * 2 / sections.length;
      for (let i = 0; i < sections.length; i++) {
        const angle = i * arc;
        ctx.beginPath();
        ctx.fillStyle = colors[i];
        ctx.moveTo(150, 150);
        ctx.arc(150, 150, 150, angle, angle + arc);
        ctx.fill();
        ctx.save();
        ctx.translate(150, 150);
        ctx.rotate(angle + arc / 2);
        ctx.textAlign = 'right';
        ctx.fillStyle = 'black';
        ctx.font = '20px Cairo';
        ctx.fillText(sections[i], 130, 8);
        ctx.restore();
      }
    }
    drawWheel();

    const spinBtn = document.getElementById('spinBtn');
    const input = document.getElementById('playerId');
    const popup = document.getElementById('popup');
    const loading = document.getElementById('loading');
    let canSpin = true;
    
    const nearWinEdges = [0, 120, 240];

    spinBtn.onclick = () => {
      if (spinBtn.textContent === 'Ø§Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø­Ø³Ø§Ø¨Ùƒ') {
        const id = input.value.trim();
        if (id.length < 9 || id.length > 12) {
          alert('Ù…Ø¹Ø±Ù Ù„Ø§Ø¹Ø¨ ØºÙŠØ± ØµØ­ÙŠØ­! Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
          return;
        }
        spinBtn.style.display = 'none';
        loading.style.display = 'block';
        setTimeout(() => {
          loading.style.display = 'none';
          spinBtn.textContent = 'Ù„Ù';
          spinBtn.style.display = 'inline-block';
          input.disabled = true; 
        }, 2000);
        return;
      }

      if (!canSpin) {
        alert('Ø¹Ø¯ Ø¨Ø¹Ø¯ 24 Ø³Ø§Ø¹Ø©');
        return;
      }

      if (spinning) return;
      spinning = true;

      const targetEdge = nearWinEdges[Math.floor(Math.random() * nearWinEdges.length)];
      const nearMissOffset = 2 + Math.random() * 8; 
      const finalStopAngle = targetEdge + nearMissOffset;

      const rotationCycles = 15 * 360; 
      const totalRotation = rotationCycles + finalStopAngle;

      canvas.style.transition = 'transform 4s cubic-bezier(0.25, 0.1, 0.25, 1.0)';
      canvas.style.transform = `rotate(${totalRotation}deg)`;

      setTimeout(() => {
        spinning = false;
        showPopup();
        canSpin = false;
      }, 4000);
      
      setTimeout(() => {
          canvas.style.transition = 'none';
          const remainingAngle = totalRotation % 360; 
          canvas.style.transform = `rotate(${remainingAngle}deg)`;
      }, 4100); 
    };

    function showPopup() {
      popup.style.display = 'block';
    }

    function closePopup() {
      popup.style.display = 'none';
    }
  </script>
</body>
</html>
